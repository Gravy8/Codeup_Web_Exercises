<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>BlackJack</title>
</head>
<body>
<script src="js/jquery.js"></script>
<script>

    var cardOne;
    var cardOneResult;
    var cardOneValue;
    var cardTwo;
    var cardTwoResult;
    var cardTwoValue;
    var nextCard;
    var nextCardResult;
    var nextCardValue;

    var userTotal;
    var userBust;

    var userAceCount = 0;
    var userAceMath = 0;

    var dealerCardOne;
    var dealerCardOneResult;
    var dealerCardOneValue;
    var dealerCardTwo;
    var dealerCardTwoResult;
    var dealerCardTwoValue;
    var dealerNextCard;
    var dealerNextCardResult;
    var dealerNextCardValue;

    var dealerTotal;
    var dealerBust;

    var dealerAceCount = 0;
    var dealerAceMath = 0;

    var blackJack;



    var cardsPulled = [];


    var one = "ace";
    var two = "ace";
    var three = "ace";
    var four = "ace";
    var five = 2;
    var six = 2;
    var eight = 2;
    var seven = 2;
    var ten = 3;
    var eleven = 3;
    var twelve = 3;
    var thirteen = 3;
    var fourteen = 4;
    var fifteen = 4;
    var sixteen = 4;
    var seventeen = 4;
    var eighteen = 5;
    var nineteen = 5;
    var twenty = 5;
    var twentyOne = 5;
    var twentyTwo = 6;
    var twentyThree = 6;
    var nine = 6;
    var twentyFour = 6;
    var twentyFive = 7;
    var twentySix = 7;
    var twentySeven = 7;
    var twentyEight = 7;
    var twentyNine = 8;
    var thirty = 8;
    var thirtyOne = 8;
    var thirtyTwo = 8;
    var thirtyThree = 9;
    var thirtyFour = 9;
    var thirtyFive = 9;
    var thirtySix = 9;
    var thirtySeven = 10;
    var thirtyEight = 10;
    var thirtyNine = 10;
    var forty = 10;
    var fortyOne = "jack";
    var fortyTwo = "jack";
    var fortyThree = "jack";
    var fortyFour = "jack";
    var fortyFive = "queen";
    var fortySix = "queen";
    var fortySeven = "queen";
    var fortyEight = "queen";
    var fortyNine = "king";
    var fifty = "king";
    var fiftyOne = "king";
    var fiftyTwo = "king";


    function assignCards(number) {
        switch (number) {
            case 1:
                number = one;
                break;
            case 2:
                number = two;
                break;
            case 3:
                number = three;
                break;
            case 4:
                number = four;
                break;
            case 5:
                number = five;
                break;
            case 6:
                number = six;
                break;
            case 7:
                number = seven;
                break;
            case 8:
                number = eight;
                break;
            case 9:
                number = nine;
                break;
            case 10:
                number = ten;
                break;
            case 11:
                number = eleven;
                break;
            case 12:
                number = twelve;
                break;
            case 13:
                number = thirteen;
                break;
            case 14:
                number = fourteen;
                break;
            case 15:
                number = fifteen;
                break;
            case 16:
                number = sixteen;
                break;
            case 17:
                number = seventeen;
                break;
            case 18:
                number = eighteen;
                break;
            case 19:
                number = nineteen;
                break;
            case 20:
                number = twenty;
                break;
            case 21:
                number = twentyOne;
                break;
            case 22:
                number = twentyTwo;
                break;
            case 23:
                number = twentyThree;
                break;
            case 24:
                number = twentyFour;
                break;
            case 25:
                number = twentyFive;
                break;
            case 26:
                number = twentySix;
                break;
            case 27:
                number = twentySeven;
                break;
            case 28:
                number = twentyEight;
                break;
            case 29:
                number = twentyNine;
                break;
            case 30:
                number = thirty;
                break;
            case 31:
                number = thirtyOne;
                break;
            case 32:
                number = thirtyTwo;
                break;
            case 33:
                number = thirtyThree;
                break;
            case 34:
                number = thirtyFour;
                break;
            case 35:
                number = thirtyFive;
                break;
            case 36:
                number = thirtySix;
                break;
            case 37:
                number = thirtySeven;
                break;
            case 38:
                number = thirtyEight;
                break;
            case 39:
                number = thirtyNine;
                break;
            case 40:
                number = forty;
                break;
            case 41:
                number = fortyOne;
                break;
            case 42:
                number = fortyTwo;
                break;
            case 43:
                number = fortyThree;
                break;
            case 44:
                number = fortyFour;
                break;
            case 45:
                number = fortyFive;
                break;
            case 46:
                number = fortySix;
                break;
            case 47:
                number = fortySeven;
                break;
            case 48:
                number = fortyEight;
                break;
            case 49:
                number = fortyNine;
                break;
            case 50:
                number = fifty;
                break;
            case 51:
                number = fiftyOne;
                break;
            case 52:
                number = fiftyTwo;
                break;
        }
        return number;
    }


    function getStartingCardsUser() {
        while (true) {
            cardOne = Math.floor(Math.random() * 52) + 1;
            if ($.inArray(cardOne, cardsPulled) == -1) {
                cardsPulled.push(cardOne);
                cardOneResult = assignCards(cardOne);
                break;
            }
        }
        if (typeof(cardOneResult) == "string") {
            if (cardOneResult == "ace") {
                if (userAceCount == 0) {
                    cardOneValue = 11;
                } else {
                    cardOneValue = 1;
                }
                userAceCount++;
            } else {
                cardOneValue = 10;
            }
        } else {
            cardOneValue = cardOneResult;
        }

        while (true) {
            cardTwo = Math.floor(Math.random() * 52) + 1;
            if ($.inArray(cardTwo, cardsPulled) == -1) {
                cardsPulled.push(cardTwo);
                cardTwoResult = assignCards(cardTwo);
                break;
            }
        }
        if (typeof(cardTwoResult) == "string") {
            if (cardTwoResult == "ace") {
                if (userAceCount == 0) {
                    cardTwoValue = 11;
                } else {
                    cardTwoValue = 1;
                }
                userAceCount++;
            } else {
                cardTwoValue = 10;
            }
        } else {
            cardTwoValue = cardTwoResult;
        }
    }

    function getStartingCardsDealer() {
        while (true) {
            dealerCardOne = Math.floor(Math.random() * 52) + 1;
            if ($.inArray(dealerCardOne, cardsPulled) == -1) {
                cardsPulled.push(dealerCardOne);
                dealerCardOneResult = assignCards(dealerCardOne);
                break;
            }
        }
        if (typeof(dealerCardOneResult) == "string") {
            if (dealerCardOneResult == "ace") {
                if (dealerAceCount == 0) {
                    dealerCardOneValue = 11;
                } else {
                    dealerCardOneValue = 1;
                }
                dealerAceCount++;
            } else {
                dealerCardOneValue = 10;
            }
        } else {
            dealerCardOneValue = dealerCardOneResult;
        }

        while (true) {
            dealerCardTwo = Math.floor(Math.random() * 52) + 1;
            if ($.inArray(dealerCardTwo, cardsPulled) == -1) {
                cardsPulled.push(dealerCardTwo);
                dealerCardTwoResult = assignCards(dealerCardTwo);
                break;
            }
        }
        if (typeof(dealerCardTwoResult) == "string") {
            if (dealerCardTwoResult == "ace") {
                if (dealerAceCount == 0) {
                    dealerCardTwoValue = 11;
                } else {
                    dealerCardTwoValue = 1;
                }
                dealerAceCount++;
            } else {
                dealerCardTwoValue = 10;
            }
        } else {
            dealerCardTwoValue = dealerCardTwoResult;
        }
    }

    function drawACardUser() {
        while (true) {
            nextCard = Math.floor(Math.random() * 52) + 1;
            if ($.inArray(nextCard, cardsPulled) == -1) {
                cardsPulled.push(nextCard);
                nextCardResult = assignCards(nextCard);
                break;
            }
        }
        if (typeof(nextCardResult) == "string") {
            if (nextCardResult == "ace") {
                if (userAceCount == 0) {
                    nextCardValue = 11;
                } else {
                    nextCardValue = 1;
                }
                userAceCount++;
            } else {
                nextCardValue = 10;
            }
        } else {
            nextCardValue = nextCardResult;
        }
    }

    function drawACardDealer() {
        while (true) {
            dealerNextCard = Math.floor(Math.random() * 52) + 1;
            if ($.inArray(dealerNextCard, cardsPulled) == -1) {
                cardsPulled.push(dealerNextCard);
                dealerNextCardResult = assignCards(dealerNextCard);
                break;
            }
        }
        if (typeof(dealerNextCardResult) == "string") {
            if (dealerNextCardResult == "ace") {
                if (dealerAceCount == 0) {
                    dealerNextCardValue = 11;
                } else {
                    dealerNextCardValue = 1;
                }
                dealerAceCount++;
            } else {
                dealerNextCardValue = 10;
            }
        } else {
            dealerNextCardValue = dealerNextCardResult;
        }
    }

    function checkForBlackJack() {
        if (userTotal == 21) {
            if (dealerTotal == 21) {
                alert("Wow! You guys both got Black Jack! What are the odds?");
                return true;
            } else {
                alert("You got Black Jack! You Win!");
                return true;
            }
        } else if (dealerTotal == 21) {
            alert("Dealer got Black Jack. You Lose!");
            return true;
        } else {
            return false;
        }
    }

    function endMessage() {
        if (confirm("Do you want to play again?")) {
            return true;
        } else {
            alert("Thanks for Playing!");
            return false;
        }
    }

    function checkForWinner() {
        if (userBust == "busted"){
            return "userBust";
        } else if (dealerBust == "busted") {
            return "dealerBust";
        } else if (userTotal > dealerTotal) {
            return "win";
        } else if (userTotal == dealerTotal) {
            return "tie";
        } else {
            return "lose";
        }
    }




    function playBlackJack() {
        getStartingCardsUser();
        getStartingCardsDealer();

        userTotal = cardOneValue + cardTwoValue;
        dealerTotal = dealerCardOneValue + dealerCardTwoValue;

        if (checkForBlackJack()) {
            blackJack = true;
        }

        if (blackJack == true) {
        } else if (confirm("Your cards are " + cardOneResult + " and " + cardTwoResult + ". Your total is currently "
                        + userTotal + ". The dealer is showing a " + dealerCardOneResult + ". Would you like to hit?")) {
            while (userTotal <= 21) {
                drawACardUser();

                userTotal += nextCardValue;

                if (userTotal > 21) {
                    if ((userAceCount > 0) && (userAceMath == 0)) {
                        userTotal -= 10;
                        userAceMath++;
                    } else {
                        alert("You drew a " + nextCardResult + ". Your total is " + userTotal + ".");
                        userBust = "busted";
                        break;
                    }
                } else if (userTotal == 21) {
                        alert("You drew a " + nextCardResult + ". Your total is " + userTotal + ".");
                        break;
                }
                if (!confirm("You drew a " + nextCardResult + ". Your total is " + userTotal + ". The dealer is showing a "
                                        + dealerCardOneResult + ". Would you like to hit?")) {
                    break;
                }
            }
        }

        if (blackJack == true) {
        } else if (userBust == "busted") {
        } else {
            alert("The dealer turned up a " + dealerCardTwoResult + ". The dealers' total is " + dealerTotal + ".");
            while (dealerTotal < 17) {
                drawACardDealer();

                dealerTotal += dealerNextCardValue;

                if (dealerTotal > 21) {
                    if ((dealerAceCount > 0) && (dealerAceMath == 0)) {
                        dealerTotal -= 10;
                        dealerAceMath++;
                    } else {
                        alert("Dealer drew a " + dealerNextCardResult + ". Dealer total is " + dealerTotal + ".");
                        dealerBust = "busted";
                        break;
                    }
                }else if ((dealerTotal <= 21) && (dealerTotal >= 17)) {
                    alert("Dealer drew a " + dealerNextCardResult + ". Dealer total is " + dealerTotal + ".");
                    break;
                } else {
                    alert("Dealer drew a " + dealerNextCardResult + ". Dealer total is " + dealerTotal + ".");
                }
            }
        }
        if (blackJack == true){
        } else {
            switch (checkForWinner()) {
                case "userBust":
                    alert("You Busted!");
                    break;
                case "dealerBust":
                    alert("Dealer Busted!");
                    break;
                case "win":
                    alert("Your total is " + userTotal + ". The dealers' total is " + dealerTotal + ". You Win!");
                    break;
                case "tie":
                    alert("Your total is " + userTotal + ". The dealers' total is " + dealerTotal + ". It's a Tie!");
                    break;
                case "lose":
                    alert("Your total is " + userTotal + ". The dealers; total is " + dealerTotal + ". You Lose!");
                    break;
            }
        }

        if (endMessage()) {
            cardsPulled = [];
            dealerBust = "notbusted";
            userBust = "notbusted";
            dealerAceCount = 0;
            dealerAceMath = 0;
            userAceCount = 0;
            userAceMath = 0;
            blackJack = false;
            playBlackJack()
        }
    }
        playBlackJack();
</script>
</body>
</html>
